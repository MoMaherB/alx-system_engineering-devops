#!/bin/bash

# Ignore SC2154 for shellcheck
# shellcheck disable=SC2154

# Update package list and install Nginx
sudo apt-get update
sudo apt-get install -y nginx

# Get the hostname of the server
HOSTNAME=$(hostname)

# Create a backup of the original Nginx configuration file
sudo cp /etc/nginx/nginx.conf /etc/nginx/nginx.conf.bak

# Add the custom header to the Nginx configuration
sudo sed -i "/http {/a \\    add_header X-Served-By \"$HOSTNAME\";" /etc/nginx/nginx.conf

# Restart Nginx to apply the changes
sudo systemctl restart nginx
